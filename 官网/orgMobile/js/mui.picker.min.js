(function(h,i,k,d){var g=30;var j=90;var f=40;var e=10;var o=h.rad2deg=function(p){return p/(Math.PI/180)};var m=h.deg2rad=function(p){return p*(Math.PI/180)};var c=navigator.platform.toLowerCase();var n=navigator.userAgent.toLowerCase();var a=(n.indexOf("iphone")>-1||n.indexOf("ipad")>-1||n.indexOf("ipod")>-1)&&(c.indexOf("iphone")>-1||c.indexOf("ipad")>-1||c.indexOf("ipod")>-1);var l=h.Picker=function(r,q){var p=this;p.holder=r;p.options=q||{};p.init();p.initInertiaParams();p.calcElementItemPostion(true);p.bindEvent()};l.prototype.findElementItems=function(){var p=this;p.elementItems=[].slice.call(p.holder.querySelectorAll("li"));return p.elementItems};l.prototype.init=function(){var p=this;p.list=p.holder.querySelector("ul");p.findElementItems();p.height=p.holder.offsetHeight;p.r=p.height/2-e;p.d=p.r*2;p.itemHeight=p.elementItems.length>0?p.elementItems[0].offsetHeight:f;p.itemAngle=parseInt(p.calcAngle(p.itemHeight*0.8));p.hightlightRange=p.itemAngle/2;p.visibleRange=j;p.beginAngle=0;p.beginExceed=p.beginAngle-g;p.list.angle=p.beginAngle;if(a){p.list.style.webkitTransformOrigin="center center "+p.r+"px"}};l.prototype.calcElementItemPostion=function(q){var p=this;if(q){p.items=[]}p.elementItems.forEach(function(t){var s=p.elementItems.indexOf(t);p.endAngle=p.itemAngle*s;t.angle=p.endAngle;t.style.webkitTransformOrigin="center center -"+p.r+"px";t.style.webkitTransform="translateZ("+p.r+"px) rotateX("+(-p.endAngle)+"deg)";if(q){var r={};r.text=t.innerHTML||"";r.value=t.getAttribute("data-value")||r.text;p.items.push(r)}});p.endExceed=p.endAngle+g;p.calcElementItemVisibility(p.beginAngle)};l.prototype.calcAngle=function(u){var s=this;var p=b=parseFloat(s.r);u=Math.abs(u);var r=parseInt(u/s.d)*180;u=u%s.d;var t=(p*p+b*b-u*u)/(2*p*b);var q=r+o(Math.acos(t));return q};l.prototype.calcElementItemVisibility=function(q){var p=this;p.elementItems.forEach(function(r){var s=Math.abs(r.angle-q);if(s<p.hightlightRange){r.classList.add("highlight")}else{if(s<p.visibleRange){r.classList.add("visible");r.classList.remove("highlight")}else{r.classList.remove("highlight");r.classList.remove("visible")}}})};l.prototype.setAngle=function(q){var p=this;p.list.angle=q;p.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+q+"deg)";p.calcElementItemVisibility(q)};l.prototype.bindEvent=function(){var q=this;var r=0;var p=null;var s=false;q.holder.addEventListener(h.EVENT_START,function(t){s=true;t.preventDefault();q.list.style.webkitTransition="";p=(t.changedTouches?t.changedTouches[0]:t).pageY;r=q.list.angle;q.updateInertiaParams(t,true)},false);q.holder.addEventListener(h.EVENT_END,function(t){s=false;t.preventDefault();q.startInertiaScroll(t)},false);q.holder.addEventListener(h.EVENT_CANCEL,function(t){s=false;t.preventDefault();q.startInertiaScroll(t)},false);q.holder.addEventListener(h.EVENT_MOVE,function(v){if(!s){return}v.preventDefault();var u=(v.changedTouches?v.changedTouches[0]:v).pageY;var t=u-p;var x=q.calcAngle(t);var w=t>0?r-x:r+x;if(w>q.endExceed){w=q.endExceed}if(w<q.beginExceed){w=q.beginExceed}q.setAngle(w);q.updateInertiaParams(v)},false);q.list.addEventListener("tap",function(t){elementItem=t.target;if(elementItem.tagName=="LI"){q.setSelectedIndex(q.elementItems.indexOf(elementItem),200)}},false)};l.prototype.initInertiaParams=function(){var p=this;p.lastMoveTime=0;p.lastMoveStart=0;p.stopInertiaMove=false};l.prototype.updateInertiaParams=function(s,q){var r=this;var p=s.changedTouches?s.changedTouches[0]:s;if(q){r.lastMoveStart=p.pageY;r.lastMoveTime=s.timeStamp||Date.now();r.startAngle=r.list.angle}else{var t=s.timeStamp||Date.now();if(t-r.lastMoveTime>300){r.lastMoveTime=t;r.lastMoveStart=p.pageY}}r.stopInertiaMove=true};l.prototype.startInertiaScroll=function(p){var B=this;var y=p.changedTouches?p.changedTouches[0]:p;var z=p.timeStamp||Date.now();var A=(y.pageY-B.lastMoveStart)/(z-B.lastMoveTime);var r=A>0?-1:1;var w=r*0.0006*-1;var s=Math.abs(A/w);var x=A*s/2;var u=B.list.angle;var t=B.calcAngle(x)*r;var q=t;if(u+t<B.beginExceed){t=B.beginExceed-u;s=s*(t/q)*0.6}if(u+t>B.endExceed){t=B.endExceed-u;s=s*(t/q)*0.6}if(t==0){B.endScroll();return}B.scrollDistAngle(z,u,t,s)};l.prototype.scrollDistAngle=function(r,q,t,s){var p=this;p.stopInertiaMove=false;(function(x,u,A,y){var v=13;var B=y/v;var w=0;(function z(){if(p.stopInertiaMove){return}var C=p.quartEaseOut(w,u,A,B);p.setAngle(C);w++;if(w>B-1||C<p.beginExceed||C>p.endExceed){p.endScroll();return}setTimeout(z,v)})()})(r,q,t,s)};l.prototype.quartEaseOut=function(q,p,s,r){return -s*((q=q/r-1)*q*q*q-1)+p};l.prototype.endScroll=function(){var p=this;if(p.list.angle<p.beginAngle){p.list.style.webkitTransition="150ms ease-out";p.setAngle(p.beginAngle)}else{if(p.list.angle>p.endAngle){p.list.style.webkitTransition="150ms ease-out";p.setAngle(p.endAngle)}else{var q=parseInt((p.list.angle/p.itemAngle).toFixed(0));p.list.style.webkitTransition="100ms ease-out";p.setAngle(p.itemAngle*q)}}p.triggerChange()};l.prototype.triggerChange=function(q){var p=this;setTimeout(function(){var r=p.getSelectedIndex();var s=p.items[r];if(h.trigger&&(r!=p.lastIndex||q===true)){h.trigger(p.holder,"change",{index:r,item:s})}p.lastIndex=r;typeof q==="function"&&q()},0)};l.prototype.correctAngle=function(q){var p=this;if(q<p.beginAngle){return p.beginAngle}else{if(q>p.endAngle){return p.endAngle}else{return q}}};l.prototype.setItems=function(r){var q=this;q.items=r||[];var p=[];q.items.forEach(function(s){if(s!==null&&s!==d){p.push("<li>"+(s.text||s)+"</li>")}});q.list.innerHTML=p.join("");q.findElementItems();q.calcElementItemPostion();q.setAngle(q.correctAngle(q.list.angle));q.triggerChange(true)};l.prototype.getItems=function(){var p=this;return p.items};l.prototype.getSelectedIndex=function(){var p=this;return parseInt((p.list.angle/p.itemAngle).toFixed(0))};l.prototype.setSelectedIndex=function(q,r,u){var p=this;p.list.style.webkitTransition="";var t=p.correctAngle(p.itemAngle*q);if(r&&r>0){var s=t-p.list.angle;p.scrollDistAngle(Date.now(),p.list.angle,s,r)}else{p.setAngle(t)}p.triggerChange(u)};l.prototype.getSelectedItem=function(){var p=this;return p.items[p.getSelectedIndex()]};l.prototype.getSelectedValue=function(){var p=this;return(p.items[p.getSelectedIndex()]||{}).value};l.prototype.getSelectedText=function(){var p=this;return(p.items[p.getSelectedIndex()]||{}).text};l.prototype.setSelectedValue=function(s,t,u){var p=this;for(var q in p.items){var r=p.items[q];if(r.value==s){p.setSelectedIndex(q,t,u);return}}};if(h.fn){h.fn.picker=function(p){this.each(function(t,s){if(s.picker){return}if(p){s.picker=new l(s,p)}else{var r=s.getAttribute("data-picker-options");var q=r?JSON.parse(r):{};s.picker=new l(s,q)}});return this[0]?this[0].picker:null};h.ready(function(){h(".mui-picker").picker()})}})(window.mui||window,window,document,undefined);